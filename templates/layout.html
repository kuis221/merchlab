<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Page title -->
    <title>MerchLab</title>

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!--<link rel="shortcut icon" type="image/ico" href="favicon.ico" />-->

    <!-- Vendor styles -->
    <link rel="stylesheet" href="/static/vendor/fontawesome/css/font-awesome.css" />
    <link rel="stylesheet" href="/static/vendor/metisMenu/dist/metisMenu.css" />
    <link rel="stylesheet" href="/static/vendor/animate.css/animate.css" />
    <link rel="stylesheet" href="/static/vendor/bootstrap/dist/css/bootstrap.css" />

    <!-- App styles -->
    <link rel="stylesheet" href="/static/fonts/pe-icon-7-stroke/css/pe-icon-7-stroke.css" />
    <link rel="stylesheet" href="/static/fonts/pe-icon-7-stroke/css/helper.css" />
    <link rel="stylesheet" href="/static/styles/style.css">
    <link rel="stylesheet" href="/static/styles/react-bootstrap-table-all.min.css">
    <link href="https://fonts.googleapis.com/css?family=Hind:400,600,700" rel="stylesheet">
    <link rel="stylesheet" href="/static/vendor/bootstrap-datepicker-master/dist/css/bootstrap-datepicker3.min.css" />
    <link rel="stylesheet" href="vendor/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css" />


    <style>


    h1, h2, h3, h4, h5, p, small, button, label, a {
        font-family: 'Hind', sans-serif;
    }

    #side-menu li, #side-menu li.active {
        background: #fff;
    }

    p, small {
        color: #21323b;
    }

    #menu {
        height:100%;
    }

    #wrapper {
        height:100%;
        overflow-y:scroll;
    }

    .btn-info {
        border-color: rgb(0, 105, 255);
        background: rgb(0, 105, 255);
    }

    #side-menu.nav > li > a:focus {
        color: #020020;
    }

    /* Loader 1 */
    /* Courtesy of Flat UI CSS Loaders: http://codepen.io/nodealpha/pen/WvLrva */
    .loader-1 {
      position: relative;
      width: 120px;
      height: 120px;
      display: inline-flex;
      background-color: transparent;
      border: 5px solid #ECEFF1;
      border-radius: 50%;
    }
    .loader-1:after {
      position: absolute;
      content: "";
      top: 0px;
      left: 0px;
      width: 110px;
      height: 110px;
      padding: 3px;
      border-width: 2px;
      border-style: solid;
      border-color: #7986CB transparent transparent transparent;
      border-radius: 50%;
      box-sizing: border-box;
      -webkit-box-sizing: border-box;
      animation: ringrotate .8s infinite ease-in-out;
      -webkit-animation: ringrotate .8s infinite ease-in-out;
    }
    /* #Loader 1 */

    /* Animation */
    @keyframes ringrotate {
      0% {
        transform: rotateZ(0deg);
        -webkit-transform: rotateZ(0deg);
      }
      100% {
        transform: rotateZ(360deg);
        -webkit-transform: rotateZ(360deg);
      }
    }
    @-webkit-keyframes ringrotate {
      0% {
        transform: rotateZ(0deg);
        -webkit-transform: rotateZ(0deg);
      }
      100% {
        transform: rotateZ(360deg);
        -webkit-transform: rotateZ(360deg);
      }
    }

    @keyframes pendulum {
      0% {
        transform: rotateZ(-20deg);
        -webkit-transform: rotateZ(-20deg);
      }
      100% {
        transform: rotateZ(20deg);
        -webkit-transform: rotateZ(20deg);
      }
    }
    @-webkit-keyframes pendulum {
      0% {
        transform: rotateZ(-20deg);
        -webkit-transform: rotateZ(-20deg);
      }
      100% {
        transform: rotateZ(20deg);
        -webkit-transform: rotateZ(20deg);
      }
    }
    /* #Animation */


    .react-bs-table {
        border-radius:0px;
    }
.react-bs-container-body tr td {
    font-size: 14px;
    overflow: hidden;
    text-align: left;
    text-overflow: ellipsis;
    vertical-align: middle;
    white-space: nowrap;
}

.table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th, .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td {
    padding: 8px;
    line-height: 1.42857143;
    vertical-align: middle;
    border-top: 1px solid #ddd;
}

.react-bs-container-body {
    color: rgba(33,50,59,.6);
    font-weight: 500;
    width: 100%;
}

    .btn-info small, .btn-primary small {
        color: white;
    }

    h3 {
        font-weight:400;
    }

    a {
        font-weight:600;
    }

    html {

    }

    #logo.light-version {
        background-color: #020020;
        border-bottom: 0px; */
        text-align: center;
    }



    th {
        text-transform:uppercase;
        font-size:10px;
    }


    #side-menu .sidebar-li, #navigation {
        background: #020020;
        border: 0px;
    }

    #side-menu li a {
        color: whitesmoke;
        text-transform: uppercase;
        font-weight: 300;
        padding: 15px 20px;
    }

    #side-menu li:active {
        color: #020020;
    }

    #menu {
        background: #020020; 
        top:56px;
    }


    #side-menu li:first-child {
        border-top: 0px;
    }

    #header {
        height:56px;
    }

    .fixed-navbar #wrapper {
        top:55px;
    }

    .display-block {
        display: block;
    }

    .red {
    	color: red;
    }

    .display-none {
        display:none;
    }

    .no-bottom-pad {
         padding-bottom:0px;
    }

    #barcode-scanner-body {
        padding-bottom:0px;
    }

    #listings-table-body {
        padding-bottom:0px;
        padding-top:0px;
    }

    .margin-top {
        margin-top:5px;
    }

    .margin-left {
        margin-left:5px;
    }

    .margin-left-md {
        margin-left:10px;
    }

    .margin-left-lg {
        margin-left:15px;
    }

    .margin-right {
        margin-right:5px;
    }

    .data-table-cell {
        padding-left:10px;
        padding-right:10px;
    }

    .no-bottom-margin {
        margin-bottom:0px;
    }

    .react-bs-table table td, .react-bs-table table th {
        overflow: auto;
        white-space: normal;
        text-overflow: ellipsis;
    }

    .clear-both {
        clear:both;
    }

    body.modal-open {
        overflow: visible;
    }

    .small-font {
        font-size:10px;
    }

    /* remember to define focus styles! */
    :focus {
        outline: 0;
    }

    </style>

</head>
<body class="fixed-navbar">

<!-- Header -->
<div id="header" style="z-index:0">
    <div>
    </div>
    <div id="logo" class="light-version">
        <a href="/" ><span style="color:#a9b6bb">
            <h5 style="font-size:16px">MerchLab (beta)</h5>

        </a>
        </span>
    </div>
    <nav role="navigation">
        <div class="header-link hide-menu"><i class="fa fa-bars"></i></div>
        <div class="small-logo">
            <span class="text-primary">MerchLab v1</span>
        </div>

    </nav>
</div>

{% if current_user.is_designer %}

<!-- Navigation -->
<aside id="menu">
    <div id="navigation">
        <br/><br/>

        <ul class="nav" id="side-menu">

            {% if request.path == '/' %}
            <li class="sidebar-li active">
                <a href="/home/" role="button" data-toggle="modal"> <span class="nav-label"><i class="pull-left pe-7s-user" style="margin-right:10px; margin-top:1px" ></i> Home</span></a>
            </li>
            {% else %}
            <li class="sidebar-li">
                <a href="/home/" role="button" data-toggle="modal"> <span class="nav-label"><i class="pull-left pe-7s-user" style="margin-right:10px; margin-top:1px" ></i> Home</span></a>
            </li>
            {% endif %}

            {% if '/settings/' in request.path %}
            <li class="active sidebar-li">
                <a href="/settings/"> <span class="nav-label"><i class="pull-left pe-7s-tools" style="margin-right:10px; margin-top:1px"></i> Settings</span></a>
            </li>
            {% else %}
            <li class="sidebar-li">
                <a href="/settings/"> <span class="nav-label"><i class="pull-left pe-7s-tools" style="margin-right:10px; margin-top:1px"></i> Settings</span></a>
            </li>  
            {% endif %}

            <li class="sidebar-li">
                <a href="/logout/"> <span class="nav-label"><i class="pull-left fa fa-sign-out"  style="margin-right:10px; margin-top:1px; color:#D3D3D3"></i> Logout</span> </a>
            </li>
        </ul>
    </div>
</aside>

{% else %}

<!-- Navigation -->
<aside id="menu">
    <div id="navigation">
        <br/><br/>

        <ul class="nav" id="side-menu">

            {% if request.path == '/' %}
            <li class="sidebar-li active">
                <a href="/home/" role="button" data-toggle="modal"> <span class="nav-label"><i class="pull-left pe-7s-user" style="margin-right:10px; margin-top:1px" ></i> Home</span></a>
            </li>
            {% else %}
            <li class="sidebar-li">
                <a href="/home/" role="button" data-toggle="modal"> <span class="nav-label"><i class="pull-left pe-7s-user" style="margin-right:10px; margin-top:1px" ></i> Home</span></a>
            </li>
            {% endif %}

            {% if '/research' in request.path  %}
            <li class="sidebar-li active">
                <a href="/research/" role="button" data-toggle="modal"> <span class="nav-label"><i class="pull-left pe-7s-user" style="margin-right:10px; margin-top:1px" ></i> Research</span></a>
            </li>
            {% else %}
            <li class="sidebar-li">
                <a href="/research/" role="button" data-toggle="modal"> <span class="nav-label"><i class="pull-left pe-7s-user" style="margin-right:10px; margin-top:1px" ></i> Research</span></a>
            </li>
            {% endif %}

            {% if '/favorites' in request.path  %}
            <li class="sidebar-li active">
                <a href="/favorites/" role="button" data-toggle="modal"> <span class="nav-label"><i class="pull-left pe-7s-user" style="margin-right:10px; margin-top:1px" ></i> Favorites</span></a>
            </li>
            {% else %}
            <li class="sidebar-li">
                <a href="/favorites/" role="button" data-toggle="modal"> <span class="nav-label"><i class="pull-left pe-7s-user" style="margin-right:10px; margin-top:1px" ></i> Favorites</span></a>
            </li>
            {% endif %}


            <li class="sidebar-li">
                <a onClick="window.open('https://www.manula.com/manuals/acceler-list/merchlab-user-guide/1/en/topic/welcome-to-merchlab-io-1-amazon-merch-research-tool', '_blank')" href="#a" aria-expanded="false"> <span class="nav-label"><i class="pull-left pe-7s-help1" style="margin-right:10px; margin-top:1px"></i> Manual </a>
            </li>            


            <!--
            {% if '/assignments' in request.path  %}
            <li class="sidebar-li active">
                <a href="/assignments/" role="button" data-toggle="modal"> <span class="nav-label"><i class="pull-left pe-7s-user" style="margin-right:10px; margin-top:1px" ></i> Assignments</span></a>
            </li>
            {% else %}
            <li class="sidebar-li">
                <a href="/assignments/" role="button" data-toggle="modal"> <span class="nav-label"><i class="pull-left pe-7s-user" style="margin-right:10px; margin-top:1px" ></i> Assignments</span></a>
            </li>
            {% endif %}

            {% if '/designers' in request.path  %}
            <li class="sidebar-li active">
                <a href="/designers/" role="button" data-toggle="modal"> <span class="nav-label"><i class="pull-left pe-7s-user" style="margin-right:10px; margin-top:1px" ></i> Designers</span></a>
            </li>
            {% else %}
            <li class="sidebar-li">
                <a href="/designers/" role="button" data-toggle="modal"> <span class="nav-label"><i class="pull-left pe-7s-user" style="margin-right:10px; margin-top:1px" ></i> Designers</span></a>
            </li>
            {% endif %}

            {% if '/payouts' in request.path  %}
            <li class="sidebar-li active">
                <a href="/payouts/" role="button" data-toggle="modal"> <span class="nav-label"><i class="pull-left pe-7s-user" style="margin-right:10px; margin-top:1px" ></i> Payouts</span></a>
            </li>
            {% else %}
            <li class="sidebar-li">
                <a href="/payouts/" role="button" data-toggle="modal"> <span class="nav-label"><i class="pull-left pe-7s-user" style="margin-right:10px; margin-top:1px" ></i> Payouts</span></a>
            </li>
            {% endif %}
            -->
            <!--
            {% if '/sales_tracker' in request.path  %}
            <li class="sidebar-li active">
                <a href="/sales_tracker" role="button" data-toggle="modal"> <span class="nav-label"><i class="pull-left pe-7s-user" style="margin-right:10px; margin-top:1px" ></i> Sales Tracker</span></a>
            </li>
            {% else %}
            <li class="sidebar-li">
                <a href="/sales_tracker" role="button" data-toggle="modal"> <span class="nav-label"><i class="pull-left pe-7s-user" style="margin-right:10px; margin-top:1px" ></i> Sales Tracker</span></a>
            </li>
            {% endif %}

            {% if '/upload_manager' in request.path  %}
            <li class="sidebar-li active">
                <a href="/upload_manager" role="button" data-toggle="modal"> <span class="nav-label"><i class="pull-left pe-7s-user" style="margin-right:10px; margin-top:1px" ></i> Upload Manager</span></a>
            </li>
            {% else %}
            <li class="sidebar-li">
                <a href="/upload_manager" role="button" data-toggle="modal"> <span class="nav-label"><i class="pull-left pe-7s-user" style="margin-right:10px; margin-top:1px" ></i>  Upload Manager</span></a>
            </li>
            {% endif %}
            -->

            {% if '/settings/' in request.path %}
            <li class="active sidebar-li">
                <a href="/settings/"> <span class="nav-label"><i class="pull-left pe-7s-tools" style="margin-right:10px; margin-top:1px"></i> Settings</span></a>
            </li>
            {% else %}
            <li class="sidebar-li">
                <a href="/settings/"> <span class="nav-label"><i class="pull-left pe-7s-tools" style="margin-right:10px; margin-top:1px"></i> Settings</span></a>
            </li>  
            {% endif %}

            <!--

            {% if '/help/' in request.path %}
            <li class="active sidebar-li">
                <a href="#a" aria-expanded="false"> <span class="nav-label"><i class="pull-left pe-7s-help1" style="margin-right:10px; margin-top:1px"></i> Help<span class="fa arrow"></span> </a>
                <ul class="nav nav-second-level collapse" aria-expanded="false">
                    <li><a href="/help/faq/">FAQ</a></li>
                    <li><a href="/help/support/">Support</a></li>
                </ul>
            </li>   
            {% else %}
            <li class="sidebar-li">
                <a href="#a" aria-expanded="false"> <span class="nav-label"><i class="pull-left pe-7s-help1" style="margin-right:10px; margin-top:1px"></i> Help<span class="fa arrow"></span> </a>
                <ul class="nav nav-second-level collapse" aria-expanded="false">
                    <li><a href="/help/faq/">FAQ</a></li>
                    <li><a href="/help/support/">Support</a></li>
                </ul>
            </li>            
            {% endif %}
            -->

            {% if current_user.role == "admin" and '/admin/' in request.path %}
            <li class="active sidebar-li">
                <a href="/admin/"> <span class="nav-label"><i class="pull-left pe-7s-help1" style="margin-right:10px; margin-top:1px"></i> Admin Panel</span></a>
            </li>
            {% elif current_user.role == "admin" %}
            <li class="sidebar-li">
                <a href="/admin/"> <span class="nav-label"><i class="pull-left pe-7s-help1" style="margin-right:10px; margin-top:1px"></i> Admin Panel</span></a>
            </li>            
            {% endif %}            



            <li class="sidebar-li">
                <a href="/logout/"> <span class="nav-label"><i class="pull-left fa fa-sign-out"  style="margin-right:10px; margin-top:1px; color:#D3D3D3"></i> Logout</span> </a>
            </li>
        </ul>
    </div>
</aside>

{% endif %}

<!-- Vendor script -->
<script src="/static/vendor/jquery/dist/jquery.min.js"></script>
<script src="/static/vendor/slimScroll/jquery.slimscroll.min.js"></script>
<script src="/static/vendor/metisMenu/dist/metisMenu.min.js"></script>
<script src="/static/vendor/toastr/build/toastr.min.js"></script>
<script src="/static/vendor/moment/moment.min.js"></script>


<script>

function authorize() {
    var sellerId = $("#seller-id").val();
    var authToken = $("#auth-token").val();
    console.log("ok", sellerId, authToken)

    toastr.options = {
      "closeButton": true,
      "debug": false,
      "newestOnTop": false,
      "progressBar": false,
      "positionClass": "toast-top-center",
      "preventDuplicates": false,
      "onclick": null,
      "showDuration": "1000",
      "hideDuration": "1000",
      "timeOut": "1000",
      "extendedTimeOut": "1000",
      "showEasing": "swing",
      "hideEasing": "linear",
      "showMethod": "fadeIn",
      "hideMethod": "fadeOut"
    } 
    toastr.success("Hang tight! We're validating with Amazon right now to make sure your details are correct.");

    $.ajax({
        type: "POST",
        url: "/authorize/",
        data: {sellerId: sellerId, authToken: authToken},
        success: function(msg) {
            if (msg == "success") {
                $("#validation-modal").modal('hide');
                swal({
                    title: "Your details have been authorized.",
                    text: "Sweet! Get ready for an amazing Amazon repricing experience :)",
                    type: "success"
                }); 
                setTimeout(function() {
                    location.reload();
                }, 500);                   
            } else if (msg == "id already exists") {
                toastr.options = {
                  "positionClass": "toast-top-center",
                } 
                toastr.error("It looks like you already have an account with us, with that Seller Id. We only allow you to create one account per Seller ID. Please contact us via our Zendesk email if you need further assistance.");
            } else {
                toastr.options = {
                  "positionClass": "toast-top-center",
                } 
                toastr.error("Oh no! Those details didn't work. Make sure the details you entered are correct, or restart the authorization process.");
            }
        }, 
        error: function(msg) {

        }
    });
}

$( document ).ready(function() {
    {% if not current_user.seller_id or current_user.seller_id == "" or not current_user.auth_token or current_user.auth_token == "" %} 
    $("#validation-modal").modal('show');
    {% endif %}
});



</script>

{% block body %}

{% endblock %}

